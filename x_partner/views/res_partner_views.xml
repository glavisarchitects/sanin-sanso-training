<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <data>

        <record id="view_partner_form" model="ir.ui.view">
            <field name="name">res.partner.view.form.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.view_partner_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[hasclass('oe_title')]" position="inside">
                    <field name="x_furigana_name"/>
                    <group>
                        <field name="x_contact_classification"
                               widget="radio" options="{'horizontal': True}" required="1"/>
                        <field name="x_partner_code"/>
                    </group>
                </xpath>
                <xpath expr="//field[@name='street']" position="before">
                    <field name="zip" position="move"/>
                    <field name="state_id" position="move"/>
                    <field name="city" position="move"/>
                </xpath>
                <xpath expr="//sheet/group/group[2]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//sheet/group" position="inside">
                    <group>
                        <field name="x_transaction_classification"
                               options="{'no_create': True}" widget="many2many_tags"/>
                        <field name="x_show_construction_permit" invisible="1"/>
                        <field name="x_department_classification" widget="radio"
                               attrs="{'invisible': [('x_transaction_classification', '=', [])]}"
                               options="{'no_create': True}"/>
                    </group>
                </xpath>
                <xpath expr="//sheet/group" position="after">
                    <group>
                        <group name="phone_fax">
                            <field name="phone" widget="phone" string="TEL代表"/>
                            <field name="mobile" widget="phone" string="TEL直通"/>
                            <field name="x_fax_number"/>
                            <field name="x_payment_notice_fax_number"/>
                        </group>
                        <group name="transaction_contract">
                            <field name="x_transaction_basic_contract"
                                   widget="radio" options="{'horizontal': True}"/>
                            <field name="x_contract_not_apply_reason"
                                   attrs="{'required': [('x_transaction_basic_contract', '!=', 'conclusion')], 'invisible': [('x_transaction_basic_contract', '!=', 'conclusion')]}"/>
                        </group>
                    </group>
                </xpath>
                <xpath expr="//page[@name='contact_addresses']" position="after">
                    <page name="partner_overview" string="取引先概要">
                        <group>
                            <group>
                                <label for="company_id" string="会社情報"/>
                                <field name="company_id" nolabel="1"
                                       options="{'no_create': True}"/>
                                <field name="x_founding_year" attrs="{'invisible': [('company_type', '=', 'person')]}"/>
                                <field name="x_capital" attrs="{'invisible': [('company_type', '=', 'person')]}"/>
                            </group>
                            <group string="業績情報"
                                   attrs="{'invisible': [('company_type', '=', 'person')]}">
                                <field name="x_partner_performance" nolabel="1">
                                    <tree editable="top">
                                        <field name="fiscal_year"/>
                                        <field name="amount_of_sale"/>
                                        <field name="management_profit"/>
                                    </tree>
                                </field>
                            </group>
                        </group>
                        <group string="建設業許可"
                               attrs="{'invisible': ['|', ('company_type', '=', 'person'), ('x_show_construction_permit', '=', False)]}">
                            <field name="x_partner_construction_permit" nolabel="1">
                                <tree editable="top">
                                    <field name="construction_permit_type_id"/>
                                    <field name="authorize_classification"/>
                                    <field name="type_classification"/>
                                    <field name="name"/>
                                    <field name="permission_date"/>
                                </tree>
                            </field>
                        </group>
                    </page>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']/group[@name='container_row_2']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//page[@name='sales_purchases']/group[@name='container_row_2']" position="after">
                    <group name="x_partner_sales_purchases">
                        <group name="company_branch_info" string="会社情報">
                            <field name="company_id" options="{'no_create': True}"/>
                            <field name="x_organization_id" string="支店情報"
                                   options="{'no_create': True}"/>
                        </group>
                        <group></group>
                        <group name="x_partner_purchase" string="購買"
                               attrs="{'invisible': [('x_contact_classification', '!=', 'supplier')]}">
                            <field name="x_purchase_person_id"/>
                            <field name="x_purchase_area"/>
                            <field name="x_minimum_purchase"/>
                            <field name="x_delivery_place" options="{'no_create': True}"/>
                            <field name="property_supplier_payment_term_id" string="支払条件"
                                   options="{'no_create': True}"/>
                        </group>
                        <group name="x_partner_sale" string="Sale"
                               attrs="{'invisible': [('x_contact_classification', '!=', 'customer')]}">
                            <field name="user_id"/>
                            <field name="x_sale_area"/>
                            <field name="x_minimum_sale"/>
                            <field name="x_receipt_place" options="{'no_create_edit': True, 'no_create': True}"/>
                            <field name="property_payment_term_id" string="Payment Terms"
                                   options="{'no_create': True}"/>
                        </group>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="view_partner_property_form" model="ir.ui.view">
            <field name="name">res.partner.view.form.account.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="account.view_partner_property_form"/>
            <field name="arch" type="xml">
                <xpath expr="//page[@name='accounting']" position="attributes">
                    <attribute name="string">会計情報</attribute>
                </xpath>
                <xpath expr="//group[@name='banks']" position="before">
                    <group>
                        <field name="company_id" string="会社情報"
                               options="{'no_create': True}"/>
                    </group>
                    <group></group>
                </xpath>
                <xpath expr="//tree/field[@name='bank_id']" position="after">
                    <field name="x_organization_id" string="支店名"/>
                </xpath>
                <xpath expr="//tree/field[@name='acc_number']" position="after">
                    <field name="x_deposit_type" optional="hide"/>
                    <field name="partner_id" optional="hide"/>
                    <field name="x_furigana" optional="hide"/>
                </xpath>
                <xpath expr="//group[@name='accounting_entries']" position="before">
                    <group/>
                    <group string="支払条件" attrs="{'invisible': [('x_contact_classification', '!=', 'supplier')]}">
                        <field name="x_payment_term_using" widget="radio" options="{'horizontal': True}"/>
                        <field name="x_other_payment_term"
                               attrs="{'invisible': [('x_payment_term_using', '=', 'regular')], 'required': [('x_payment_term_using', '=', 'other')]}"/>
                        <field name="x_reason_to_change_payment_term"
                               attrs="{'invisible': [('x_payment_term_using', '=', 'regular')], 'required': [('x_payment_term_using', '=', 'other')]}"/>
                    </group>
                </xpath>
                <xpath expr="//group[@name='accounting_entries']" position="inside">
                    <field name="x_control_account"/>
                </xpath>
                <xpath expr="//group[@name='accounting_entries']" position="after">
                    <group string="支払条件の当社規定詳細"
                           attrs="{'invisible': [('x_contact_classification', '!=', 'supplier')]}">
                        <field name="name" nolabel="1"/>
                    </group>
                </xpath>
            </field>
        </record>

        <record id="res_partner_kanban_view" model="ir.ui.view">
            <field name="name">res.partner.view.kanban.inherit</field>
            <field name="model">res.partner</field>
            <field name="inherit_id" ref="base.res_partner_kanban_view"/>
            <field name="arch" type="xml">
                <field name="type" position="after">
                    <field name="x_partner_code"/>
                    <field name="x_contact_classification"/>
                    <field name="x_transaction_classification"/>
                </field>
                <xpath expr="//strong[hasclass('oe_partner_heading')]" position="inside">
                    <t t-if="record.x_partner_code.raw_value">
                        <span>[</span>
                        <field name="x_partner_code"/>
                        <span>]</span>
                    </t>
                </xpath>
                <xpath expr="//div[hasclass('oe_kanban_partner_categories')]" position="before">
                    <t t-if="record.x_contact_classification.raw_value">
                        <field name="x_contact_classification"/>
                    </t>
                    <t t-if="record.x_transaction_classification.raw_value">
                        <field name="x_transaction_classification" widget="many2many_tags"/>
                    </t>
                </xpath>
                <xpath expr="//span[hasclass('oe_kanban_partner_links')]" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

    </data>
</odoo>
